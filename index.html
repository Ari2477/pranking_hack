<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HACKING ACCOUNT SITE</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#9aa4b2}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071025 0%, #021021 100%);color:#e6eef6}
    .wrap{max-width:920px;margin:36px auto;padding:24px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
    h1{margin:0 0 6px;font-size:20px}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}.card{background:var(--card);padding:14px;border-radius:10px}
    .drop{border:2px dashed rgba(255,255,255,0.06);padding:18px;border-radius:8px;min-height:120px;display:flex;align-items:center;justify-content:center;text-align:center;transition:all .18s}
    .drop.dragover{border-color:var(--accent);transform:translateY(-4px);box-shadow:0 8px 30px rgba(6,182,212,0.08)}
    input[type=text],input[type=url]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:inherit}
    label{display:block;font-size:13px;margin-bottom:6px;color:var(--muted)}
   .row{display:flex;gap:10px}
    button{background:var(--accent);border:none;padding:10px 12px;border-radius:8px;color:#022;cursor:pointer;font-weight:600}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--muted)}
   .preview{display:flex;flex-direction:column;gap:10px;align-items:center}
   .canvas-wrap{width:100%;height:360px;background:#021223;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden}
   .canvas-wrap img{max-width:100%;max-height:100%;object-fit:contain}
   .meta{font-size:13px;color:var(--muted)}
   .controls{display:flex;gap:10px;flex-wrap:wrap;}
   .hint{font-size:13px;color:var(--muted);margin-top:8px}

  </style>
</head>
<body>
  <div class="wrap">
    <h1>HACKING ACCOUNT SITE</h1>
    <p class="lead">Drop or paste a URL (or type it). The site will automatically extract the UID if available — you can edit the name and uid before generating the image.</p><div class="grid">
  <div class="card">
    <div id="dropArea" class="drop" tabindex="0">
      <div>
        <strong>Drag & drop a URL here</strong>
        <div class="hint">or paste/type in the field below</div>
      </div>
    </div>

    <div style="margin-top:12px">
      <label for="urlInput">URL (paste or type):</label>
      <input id="urlInput" type="url" placeholder="https://example.com/profile/12345 or https://tiktok.com/@name" />
    </div>

    <div style="margin-top:12px">
      <label for="nameInput">Name (visible on image):</label>
      <input id="nameInput" type="text" placeholder="Friend" />
    </div>

    <div style="margin-top:12px">
      <label for="uidInput">UID / ID:</label>
      <input id="uidInput" type="text" placeholder="Auto-extracted from URL, editable" />
    </div>

    <div style="margin-top:12px" class="row">
      <button id="generateBtn">Generate Account</button>
      <button id="clearBtn" class="ghost">Clear</button>
    </div>

  </div>

  <div class="card preview">
    <div class="meta">Preview</div>
    <div class="canvas-wrap" id="previewArea">
      <div class="meta">No preview — generate an image first.</div>
    </div>

    <div style="width:100%" class="controls">
      <button id="openBtn" class="ghost" style="display:none">Open in new tab</button>
      <button id="downloadBtn" class="ghost" style="display:none">Download the info</button>
      <button id="copyLinkBtn" class="ghost" style="display:none">Copy the password and email/number</button>
    </div>

    <div class="hint" id="generatedUrlText" style="word-break:break-all"></div>
  </div>
</div>
 </div>  
  <script>
    const API_BASE = 'https://api-canvass.vercel.app/hack';

    const dropArea = document.getElementById('dropArea');
    const urlInput = document.getElementById('urlInput');
    const nameInput = document.getElementById('nameInput');
    const uidInput = document.getElementById('uidInput');
    const generateBtn = document.getElementById('generateBtn');
    const previewArea = document.getElementById('previewArea');
    const openBtn = document.getElementById('openBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const copyLinkBtn = document.getElementById('copyLinkBtn');
    const clearBtn = document.getElementById('clearBtn');
    const generatedUrlText = document.getElementById('generatedUrlText');

    function prevent(e){e.preventDefault();e.stopPropagation();}

    function setDropState(active){
      dropArea.classList.toggle('dragover', active);
    }

    ['dragenter','dragover'].forEach(evt => {
      dropArea.addEventListener(evt, (e)=>{ prevent(e); setDropState(true); });
    });
    ['dragleave','drop'].forEach(evt => {
      dropArea.addEventListener(evt, (e)=>{ prevent(e); setDropState(false); });
    });
    dropArea.addEventListener('drop', (e)=>{
      prevent(e);
      const dt = e.dataTransfer;
      const text = dt.getData('text/uri-list') || dt.getData('text/plain');
      if(text) handleIncomingURL(text.trim());
    });

    urlInput.addEventListener('paste', (e)=>{
      const pasted = (e.clipboardData || window.clipboardData).getData('text');
      if(pasted) setTimeout(()=>handleIncomingURL(pasted.trim()), 10);
    });
    urlInput.addEventListener('change', ()=>handleIncomingURL(urlInput.value.trim()));

    function handleIncomingURL(text){
      if(!text) return;
      const urlMatch = text.match(/https?:\/\/[^\s"']+/i);
      const url = urlMatch ? urlMatch[0] : text;
      urlInput.value = url;

      try{
        const u = new URL(url);
        const qp = u.searchParams;
        const idParam = qp.get('id') || qp.get('uid') || qp.get('user') || qp.get('profile');
        if(idParam) uidInput.value = idParam;
        else{
          const segs = u.pathname.split('/').filter(Boolean);
          if(segs.length){
            const last = segs[segs.length-1];
            uidInput.value = last;
          }
        }
        const host = u.hostname.replace('www.','');
        const pretty = host.split('.')[0];
        if(!nameInput.value) nameInput.value = decodeURIComponent(segs && segs.length ? segs[segs.length-1].replace(/[-_]/g,' ') : pretty);
      }catch(err){
        uidInput.value = text;
      }
    }

    function buildApiUrl(name, uid){
      const safeName = encodeURIComponent(name || 'Friend');
      const safeUid = encodeURIComponent(uid || '');
      return `${API_BASE}?name=${safeName}&uid=${safeUid}`;
    }

    function showPreview(imageUrl){
      previewArea.innerHTML = '';
      const img = document.createElement('img');
      img.src = imageUrl;
      img.alt = 'Canvas preview';
      img.onload = ()=>{}
      img.onerror = ()=>{
        previewArea.innerHTML = '<div class="meta">Cannot load the image. The API might be offline or have CORS restrictions — but it should work when opened in a new tab.</div>';
      }
      previewArea.appendChild(img);
      openBtn.style.display = 'inline-block';
      downloadBtn.style.display = 'inline-block';
      copyLinkBtn.style.display = 'inline-block';
      generatedUrlText.textContent = '';
    }

    generateBtn.addEventListener('click', ()=>{
      const name = nameInput.value.trim() || 'Friend';
      const uid = uidInput.value.trim() || '';
      const apiUrl = buildApiUrl(name, uid);

      showPreview(apiUrl);
      generatedUrlText.textContent = apiUrl;

      openBtn.onclick = ()=>window.open(apiUrl, '_blank');
      copyLinkBtn.onclick = async ()=>{
        try{ await navigator.clipboard.writeText(apiUrl); alert('Image URL copied!'); }
        catch(e){ prompt('Copy this URL:', apiUrl); }
      }

      downloadBtn.onclick = ()=>{
        fetch(apiUrl, {mode:'cors'}).then(r=>r.blob()).then(blob=>{
          const a = document.createElement('a');
          const url = URL.createObjectURL(blob);
          a.href = url;
          a.download = `image_${uid || 'image'}.png`;
          document.body.appendChild(a);
          a.click();
          a.remove();
          URL.revokeObjectURL(url);
        }).catch(err=>{
          alert('Cannot download directly due to CORS. We\'ll open the image in a new tab for you to save manually.');
          window.open(apiUrl, '_blank');
        });
      }
    });

    clearBtn.addEventListener('click', ()=>{
      urlInput.value='';nameInput.value='';uidInput.value='';previewArea.innerHTML='<div class="meta">No preview — generate an image first.</div>';
      openBtn.style.display=downloadBtn.style.display=copyLinkBtn.style.display='none';
      generatedUrlText.textContent='';
    });
    
    [urlInput,nameInput,uidInput].forEach(el=>el.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ generateBtn.click(); } }));

    nameInput.value = 'Friend';

  </script>
</body>
</html>
